<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Imagen aleatoria de Google Drive</title>
  <style>
    body { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #fafaff;}
    img { max-width: 90vw; max-height: 80vh; border-radius: 16px; box-shadow: 0 4px 24px #0002;}
    .loader { font-family: sans-serif; font-size: 1.3em; margin-bottom: 20px; color: #888;}
  </style>
</head>
<body>
  <div class="loader" id="loader">Cargando imagen aleatoria...</div>
  <img id="random-image" src="" alt="Imagen aleatoria" style="display:none">
  <script>
    // Pega aquí tu URL de Apps Script (la que devuelve el JSON)
    const API_URL = "https://script.google.com/macros/s/AKfycbzTZZYVj4GkTnOFDGkwOHqJQGq5hBtXekg-zZBCTgCZlPzyYNmH6_XGYYQqB4GtI-wIPw/exec";

    fetch(API_URL)
      .then(response => response.json())
      .then(images => {
        if (!images || images.length === 0) {
          document.getElementById("loader").innerText = "No hay imágenes en la carpeta.";
          return;
        }
        // Escoge una imagen aleatoria
        const idx = Math.floor(Math.random() * images.length);
        const img = images[idx];
        // Intenta cargar la imagen
        const imageEl = document.getElementById("random-image");
        imageEl.onload = () => {
          imageEl.style.display = "";
          document.getElementById("loader").style.display = "none";
        };
        imageEl.onerror = () => {
          document.getElementById("loader").innerText = "La imagen no está disponible o los permisos no son públicos.";
        };
        imageEl.src = img.url;
      })
      .catch(error => {
        document.getElementById("loader").innerText = "Error cargando la imagen: " + error;
      });
  </script>
</body>
</html>
